
      <h1 class="text-2xl font-bold p-5">Orders</h1>
<ng-container *ngIf="!isloader">
  <div class="text-xs">
    
    <!-- ðŸ” Filters -->
    <div class="mb-4 flex  p-3  flex-col sm:flex-row flex-wrap items-start sm:items-center gap-4">

      <!-- ðŸŒ† Filter by City -->
      <div class="flex items-center gap-2">
        <label class="text-sm font-semibold">Filter by City:</label>
        <select
          [(ngModel)]="selectedCity"
          (change)="applyFilter()"
          class="border px-2 py-1 rounded text-sm bg-white dark:bg-gray-800 dark:text-white">
          <option value="">All</option>
          <option value="NEW YEAR EVENTS">NEW YEAR EVENTS</option>
          <option value="SAFARI TOURS">SAFARI TOURS</option>
          <option value="COMBO DEALS">COMBO DEALS</option>
          <option value="SEA ADVENTURES">SEA ADVENTURES</option>
          <option value="CITY TOURS">CITY TOURS</option>
          <option value="DHOW CRUISE">DHOW CRUISE</option>
        </select>
      </div>

      <!-- ðŸ“… Filter by Date -->
      <div class="flex items-center gap-2">
        <label class="text-sm font-semibold">Filter by Date:</label>
        <input
          type="date"
          [(ngModel)]="selectedDate"
          (change)="applyFilter()"
          class="border px-2 py-1 rounded text-sm bg-white dark:bg-gray-800 dark:text-white w-[140px]" />
      </div>

      <!-- ðŸ”„ Reset Button -->
      <button
        (click)="resetFilters()"
        class="px-3 py-1 bg-gray-700 text-white text-xs rounded hover:bg-gray-800">
        Reset Filters
      </button>
    </div>

    <!-- ðŸ“‹ Orders Table -->
  <!-- ðŸ“‹ Orders Table Wrapper with Horizontal Scroll -->
<div class=" overflow-x-auto rounded-xl">
  <table class="min-w-[700px] w-full text-left text-[#273F4F] bg-white dark:bg-gray-900">
    <!-- Table Headings -->
    <thead class="text-[11px] uppercase bg-slate-800 text-white tracking-wider">
      <tr>
        <th class="px-3 py-3">Namesd</th>
        <th class="px-2 py-3">Address</th>
        <th class="px-2 py-3">City</th>
        <th class="px-2 py-3">Date</th>
        <th class="px-2 py-3">Action</th>
        <th class="px-2 py-3">Total</th>
      </tr>
    </thead>

    <!-- Table Body -->
    <tbody>
      <tr *ngFor="let user of userSummaries"
          class="group border-b border-slate-300 cursor-pointer dark:border-slate-600 hover:bg-indigo-900 transition-colors duration-200">
        
        <!-- Name & Email -->
        <td class="flex items-center gap-2 px-2 py-2 font-medium text-slate-900 dark:text-white whitespace-nowrap">
          <img class="w-8 h-8 rounded-full shadow-md ring-1 ring-slate-100"
               [src]="user.thumbnail ? 'http://localhost:4000/uploads/' + user.thumbnail : 'assets/default-user.jpg'"
               alt="User Image">
          <div>
            <div class="text-[13px] font-semibold group-hover:text-white">{{ user.userName }}</div>
            <div class="text-[11px] text-slate-500 dark:text-gray-400 group-hover:text-white">
              {{ user.userEmail }}
            </div>
          </div>
        </td>

        <!-- Address -->
        <td class="px-2 py-2 text-slate-600 group-hover:text-white">
          {{ user.address }}
        </td>

        <!-- City -->
        <td class="px-2 py-2 text-slate-600 group-hover:text-white">
          {{ user.products[0]?.cityName }}
        </td>

        <!-- Date -->
        <td class="px-2 py-2 text-slate-600 group-hover:text-white">
          {{ user.products[0]?.order_date }}
        </td>

        <!-- Action -->
        <td class="px-2 py-2">
          <a [routerLink]="['/admin/user-details', user.userId]"
             class="text-[11px] font-semibold text-blue-600 dark:text-blue-400 group-hover:text-white hover:underline">
            View Details
          </a>
        </td>

        <!-- Total -->
        <td class="px-2 py-2 text-green-700 dark:text-green-400 font-semibold">
         AED:{{ (user.total || 0) + (user.privatetransferprice || 0) }}


        </td>
      </tr>
    </tbody>
  </table>
</div>


    <!-- ðŸ“„ Details Modal -->
    <div *ngIf="showDetails" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
      <div class="bg-white w-[90vw] md:w-[600px] p-5 rounded shadow-lg relative text-sm">
        <h2 class="text-base font-bold text-pink-800 mb-1">Details for {{ selectedUser.userName }}</h2>
        <p class="text-[11px] mb-3 text-slate-600">{{ selectedUser.userEmail }}</p>

        <table class="w-full text-[11px] border !border-slate-300 dark:!border-slate-600 mb-3">
          <thead>
            <tr class="bg-pink-100 text-pink-900">
              <th class="p-2 text-left">Product ID</th>
              <th class="p-2 text-left">Total</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let p of selectedUser.products" class="border-t !border-slate-200 dark:!border-slate-600">
              <td class="p-2">{{ p.productId }}</td>
              <td class="p-2 text-green-700">Rs. {{ p.total }}</td>
            </tr>
          </tbody>
        </table>

        <button (click)="closeDetails()" class="mt-1 px-3 py-1 bg-pink-600 hover:bg-pink-700 text-white rounded">
          Close
        </button>
      </div>
    </div>
  </div>
</ng-container>









































<!-- Skeleton Loader -->
<ng-container *ngIf="isloader">
  <div class="p-4 place-content-center grid text-xs">
    <div class="max-h-[600px] overflow-y-auto rounded-xl">
      <table class="min-w-full text-left text-[#273F4F] bg-white dark:bg-gray-900 border !border-slate-300 dark:!border-slate-200">
        <thead class="text-[11px] uppercase bg-slate-800 text-white tracking-wider">
          <tr>
            <th class="px-3 py-3">Name</th>
            <th class="px-2 py-3">Address</th>
            <th class="px-2 py-3">City</th>
            <th class="px-2 py-3">Order-date</th>
            <th class="px-2 py-3">Total</th>
            <th class="px-2 py-3">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let skeleton of skeletonArray" class="animate-pulse border-b !border-slate-300">
            <td class="px-3 py-3">
              <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-gray-300 rounded-full"></div>
                <div class="space-y-1">
                  <div class="w-24 h-3 bg-gray-300 rounded"></div>
                  <div class="w-20 h-2 bg-gray-200 rounded"></div>
                </div>
              </div>
            </td>
            <td class="px-2 py-3"><div class="w-24 h-3 bg-gray-300 rounded"></div></td>
            <td class="px-2 py-3"><div class="w-16 h-3 bg-gray-300 rounded"></div></td>
            <td class="px-2 py-3"><div class="w-20 h-3 bg-gray-300 rounded"></div></td>
            <td class="px-2 py-3"><div class="w-16 h-3 bg-gray-300 rounded"></div></td>
            <td class="px-2 py-3"><div class="w-16 h-3 bg-gray-300 rounded"></div></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</ng-container>
